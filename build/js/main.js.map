{"version":3,"file":"main.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAQ,KCExDC,OAAOC,UAAUC,MAAM,SAAUC,GAE7BA,EAAEF,UAAUG,GAAG,QAAS,uBAAwB,WAC5CD,EAAE,kBAAkBE,IAAI,IACxBF,EAAE,mBAAmBG,OACzB,GAGAH,EAAEF,UAAUG,GAAG,QAAS,0BAA2B,WAC/C,IAAIG,EAAQJ,EAAEK,MAEVC,EAASN,EAAE,kBAAkBE,MACjC,IAAKI,EAED,YADAC,OAAMC,EAAAA,EAAAA,IAAG,2BAIb,MAAMC,EAAWT,EAAE,mBACnBS,EAASN,QAETC,EAAMM,KAAK,YAAY,GACvBN,EAAMO,MAAKH,EAAAA,EAAAA,IAAG,kBAEdR,EAAEY,KACEC,aAAaC,QACb,CACIC,OAAQ,4BACRT,OAAQA,EACRU,MAAOH,aAAaG,OAExB,SAAUC,GACN,IAAKA,EAASC,QAEV,YADAX,OAAMC,EAAAA,EAAAA,IAAG,WAAaS,EAASE,KAAKC,SAIxC,MAAMC,EAAerB,EAAE,UAClBW,MAAKH,EAAAA,EAAAA,IAAG,iCACRc,KAAK,QAAS,uBAEbC,EAAOvB,EAAE,YACVsB,KAAK,KAAM,uBACXA,KAAK,aAAcL,EAASE,KAAKK,OACjCF,KAAK,WAAYL,EAASE,KAAKM,KAE9BC,EAAO1B,EAAE,SACVsB,KAAK,MAAOL,EAASE,KAAKQ,OAC1BL,KAAK,MAAOL,EAASE,KAAKM,MAAOjB,EAAAA,EAAAA,IAAG,oBACpCc,KAAK,QAAS,0BAEnBC,EAAKK,OAAOF,GAEZjB,EAASN,QAAQyB,OAAOL,GACxBd,EAASmB,OAAOP,EACpB,GACFQ,OAAO,WACLzB,EAAMM,KAAK,YAAY,GACvBN,EAAMO,MAAKH,EAAAA,EAAAA,IAAG,YAClB,EACJ,GAGAR,EAAEF,UAAUG,GAAG,QAAS,uBAAwB,WAC5C,MAAMG,EAAQJ,EAAEK,MAChB,IAAImB,EAAQxB,EAAEK,MAAMc,KAAK,SACrBM,EAAMzB,EAAEK,MAAMc,KAAK,OACnBW,EAAW9B,EAAEK,MAAM0B,KAAK,OAAOT,KAAK,OACpCU,EAAchC,EAAE,wBAEpBI,EAAMM,KAAK,YAAY,GACvBsB,EAAYrB,MAAKH,EAAAA,EAAAA,IAAG,uBACpBwB,EAAYC,SAAS,qBAErBjC,EAAEY,KACEC,aAAaC,QACb,CACIC,OAAQ,0BACRS,MAAOA,EACPC,IAAKA,EACLE,MAAOG,EACPd,MAAOH,aAAaG,OAExB,SAAUC,GACN,IAAKA,EAASC,QAEV,YADAX,OAAMC,EAAAA,EAAAA,IAAG,WAAaS,EAASE,KAAKC,SAIxC,MAAMc,EAAWlC,EAAE,SACdiC,SAAS,yBACTtB,MACGH,EAAAA,EAAAA,IACI,sFAIZR,EAAE,mBAAmBG,QAAQyB,OAAOM,EACxC,GAECC,KAAK,WACF5B,OAAMC,EAAAA,EAAAA,IAAG,2BACb,GACCqB,OAAO,WACJzB,EAAMM,KAAK,YAAY,GACvBsB,EAAYrB,MAAKH,EAAAA,EAAAA,IAAG,iCACpBwB,EAAYI,YAAY,oBAC5B,EACR,EACJ,E","sources":["webpack://gemini-image-generation/external window [\"wp\",\"i18n\"]","webpack://gemini-image-generation/./src/js/main.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","import { __ } from '@wordpress/i18n';\n\njQuery(document).ready(function ($) {\n    // Handle the clear button click\n    $(document).on('click', '#gemini-clear-button', function () {\n        $('#gemini_prompt').val('');\n        $('#gemini-preview').empty();\n    });\n\n    // Handle the image generation button click\n    $(document).on('click', '#gemini-generate-button', function () {\n        var $this = $(this);\n\n        var prompt = $('#gemini_prompt').val();\n        if (!prompt) {\n            alert(__('Please enter a prompt.'));\n            return;\n        }\n\n        const $preview = $('#gemini-preview');\n        $preview.empty();\n\n        $this.prop('disabled', true);\n        $this.text(__('Generating...'));\n\n        $.post(\n            geminiImgGen.ajaxURL,\n            {\n                action: 'gemini_img_generate_image',\n                prompt: prompt,\n                nonce: geminiImgGen.nonce,\n            },\n            function (response) {\n                if (!response.success) {\n                    alert(__('Error: ') + response.data.message);\n                    return;\n                }\n\n                const $infoMessage = $('<span>')\n                    .text(__('Click on the image to upload'))\n                    .attr('class', 'gemini-info-message');\n\n                const $btn = $('<button>')\n                    .attr('id', 'gemini-image-button')\n                    .attr('data-title', response.data.title)\n                    .attr('data-alt', response.data.alt);\n\n                const $img = $('<img>')\n                    .attr('src', response.data.image)\n                    .attr('alt', response.data.alt || __('Generated Image'))\n                    .attr('class', 'gemini-generated-image');\n\n                $btn.append($img);\n\n                $preview.empty().append($btn);\n                $preview.append($infoMessage);\n            }\n        ).always(function () {\n            $this.prop('disabled', false);\n            $this.text(__('Generate'));\n        });\n    });\n\n    // Handle the image button click\n    $(document).on('click', '#gemini-image-button', function () {\n        const $this = $(this);\n        var title = $(this).data('title');\n        var alt = $(this).data('alt');\n        var imageSrc = $(this).find('img').attr('src');\n        var infoMessage = $('.gemini-info-message');\n\n        $this.prop('disabled', true);\n        infoMessage.text(__('Inserting image...'));\n        infoMessage.addClass('spinner is-active');\n\n        $.post(\n            geminiImgGen.ajaxURL,\n            {\n                action: 'gemini_img_upload_image',\n                title: title,\n                alt: alt,\n                image: imageSrc,\n                nonce: geminiImgGen.nonce,\n            },\n            function (response) {\n                if (!response.success) {\n                    alert(__('Error: ') + response.data.message);\n                    return;\n                }\n\n                const $message = $('<div>')\n                    .addClass('notice notice-success')\n                    .text(\n                        __(\n                            'Image inserted successfully! Please refresh the page and check the media library.'\n                        )\n                    );\n\n                $('#gemini-preview').empty().append($message);\n            }\n        )\n            .fail(function () {\n                alert(__('Failed to insert image.'));\n            })\n            .always(function () {\n                $this.prop('disabled', false);\n                infoMessage.text(__('Click on the image to upload'));\n                infoMessage.removeClass('spinner is-active');\n            });\n    });\n});\n"],"names":["window","jQuery","document","ready","$","on","val","empty","$this","this","prompt","alert","__","$preview","prop","text","post","geminiImgGen","ajaxURL","action","nonce","response","success","data","message","$infoMessage","attr","$btn","title","alt","$img","image","append","always","imageSrc","find","infoMessage","addClass","$message","fail","removeClass"],"sourceRoot":""}